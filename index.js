import{corpus as e}from"./dictionary.js";var select_audio=new Audio("select.mp3"),bell_audio=new Audio("bell.mp3");select_audio.load(),bell_audio.load();let testdictionary=["earth","plane","crane","audio","house"],dictionary=e;var keyboard=new Map([["q",0],["w",0],["e",0],["r",0],["t",0],["y",0],["u",0],["i",0],["o",0],["p",0],["a",0],["s",0],["d",0],["f",0],["g",0],["h",0],["j",0],["k",0],["l",0],["z",0],["x",0],["c",0],["v",0],["b",0],["n",0],["m",0]]);function getSecretWord(){for(;;){let e=dictionary[Math.floor(Math.random()*dictionary.length)];console.log(e);let t=new Set;for(let r=0;r<5;++r)t.add(e[r]);if(5==t.size)return e}}let state={secret:getSecretWord(),grid:Array(6).fill().map(()=>[,,,,,].fill("")),currentRow:0,currentCol:0,greenpoints:0,yellowpoints:0,hinted:0,score:0};function drawGrid(e){let t=document.createElement("div");t.className="grid";for(let r=0;r<6;r++)for(let n=0;n<5;n++)drawBox(t,r,n);e.appendChild(t)}function updateGrid(){for(let e=0;e<state.grid.length;e++)for(let t=0;t<state.grid[e].length;t++){let r=document.getElementById(`box${e}${t}`);r.textContent=state.grid[e][t]}}function drawBox(e,t,r,n=""){let a=document.createElement("div");return a.className="box",a.id=`box${t}${r}`,a.textContent=n,e.appendChild(a),a}function getScore(){let e=state.currentRow,t=state.greenpoints,r=state.yellowpoints,n;return(2*(10*(7-e)+2*t+r-20)/(1+state.hinted)).toFixed()}function registerKeyboardEvents(){document.body.onkeydown=e=>{let t=e.key;if("Enter"===t&&5===state.currentCol){let r=getCurrentWord();isWordValid(r)?(revealWord(r),state.currentRow++,state.currentCol=0):alert("Invalid word")}("Backspace"===t||"Delete"===t)&&removeLetter(),isLetter(t)&&addLetter(t),updateGrid()}}function getCurrentWord(){return state.grid[state.currentRow].reduce((e,t)=>e+t)}function isWordValid(e){return dictionary.includes(e)}function revealWord(e){let t=state.currentRow;for(let r=0;r<5;r++){let n=document.getElementById(`box${t}${r}`),a=n.textContent;setTimeout(()=>{a===state.secret[r]?(state.greenpoints++,keyboard.set(a,1),n.classList.add("right"),changeLetter(a.toUpperCase(),"green")):state.secret.includes(a)?(1!=keyboard.get(a)&&(state.yellowpoints++,keyboard.set(a,2),changeLetter(a.toUpperCase(),"yellow")),n.classList.add("wrong")):(keyboard.set(a,3),n.classList.add("empty"),changeLetter(a.toUpperCase(),"gray"))},(r+1)*500/2),state.secret==e?n.classList.add("jiggle"):n.classList.add("animated"),n.style.animationDelay=`${500*r/2}ms`}let o=state.secret===e,l=5===state.currentRow;setTimeout(()=>{if(o){var e=getScore();bell_audio.play(),alert(`CONGRATULATIONS! 
 Your score : ${e}`),window.location.reload()}else l&&(alert(`The word was ${state.secret.toUpperCase()}`),window.location.reload())},2500)}function isLetter(e){return 1===e.length&&e.match(/[a-z]/i)}function addLetter(e){5!==state.currentCol&&(state.grid[state.currentRow][state.currentCol]=e,state.currentCol++)}function removeLetter(){0!==state.currentCol&&(state.grid[state.currentRow][state.currentCol-1]="",state.currentCol--)}function changeLetter(e,t){document.getElementById(e).style.backgroundColor=t}var meaningHint="Sorry, Hint not found!";function getMeaning(e){fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${e}`).then(e=>e.json()).then(e=>{meaningHint=e[0].meanings[0].definitions[1].definition}).catch(()=>{console.log("sorry can not find")})}function startup(){let e=document.getElementById("game");drawGrid(e);let t=document.getElementById("kboard1"),r=document.getElementById("kboard2"),n=document.getElementById("kboard3"),a=document.getElementById("kboard4"),o=[81,87,69,82,84,89,85,73,79,80,65,83,68,70,71,72,74,75,76,90,88,67,86,66,78,77];for(let l=0;l<=25;l++){let i=o[l],d=document.createElement("button"),s=String.fromCharCode(i),c=document.createElement("span");c.style.fontSize="20px",c.style.fontWeight="600",c.appendChild(document.createTextNode(s)),d.appendChild(c),l<10?t.appendChild(d):l<19?r.appendChild(d):n.appendChild(d),d.setAttribute("id",s),d.style.padding="5px",d.style.margin="0.5px",d.style.height="35px",d.style.width="35px",d.style.borderColor="gray",d.onclick=function(){x(s)}}{let p=document.createElement("button"),u="ENTER",g=document.createElement("span");g.style.fontSize="20px",g.style.fontWeight="600",g.appendChild(document.createTextNode(u)),p.appendChild(g),a.appendChild(p),p.setAttribute("id",u),p.style.padding="5px",p.style.margin="0.5px",p.style.backgroundColor="green",p.style.borderColor="gray",p.onclick=function(){x(u)}}{let y=document.createElement("button"),$=document.createElement("span");$.style.fontSize="20px",$.style.fontWeight="600",$.appendChild(document.createTextNode("?")),y.appendChild($),n.appendChild(y),y.setAttribute("id","?"),y.style.padding="5px",y.style.margin="0.5px",y.style.height="35px",y.style.width="35px",y.style.borderColor="gray",y.onclick=function(){select_audio.play(),window.open("manual.png","popUpWindow","height=595,width=600,left=300,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes")}}{let h=document.createElement("button"),f=document.createElement("span");f.style.fontSize="20px",f.style.fontWeight="600",f.appendChild(document.createTextNode("★")),h.appendChild(f),a.appendChild(h),h.setAttribute("id","★"),h.style.padding="0px",h.style.margin="0.5px",h.style.height="40px",h.style.width="40px",h.style.backgroundColor="aqua",h.style.borderColor="gray",h.onclick=function(){if(bell_audio.play(),state.currentRow>=2){state.hinted++;try{blurt("Hint",meaningHint,"success")}catch(e){blurt("Sorry","Hint not found","success")}}else blurt("OOPS!","Hint will be activated after 2nd trial","success")}}{let C=document.createElement("button"),m="CLEAR",b=document.createElement("span");b.style.fontSize="20px",b.style.fontWeight="600",b.appendChild(document.createTextNode(m)),C.appendChild(b),a.appendChild(C),C.setAttribute("id",m),C.style.padding="5px",C.style.margin="0.5px",C.style.backgroundColor="red",C.style.borderColor="gray",C.onclick=function(){x(m)}}function x(e){select_audio.play();let t=document.getElementById(e).textContent;if("enter"===(t=t.toLowerCase())&&5===state.currentCol){let r=getCurrentWord();isWordValid(r)?(revealWord(r),state.currentRow++,state.currentCol=0):alert("Invalid word")}"clear"===t&&removeLetter(),isLetter(t)&&addLetter(t),updateGrid()}registerKeyboardEvents(),window.addEventListener("contextmenu",e=>{e.preventDefault()}),console.log(state.secret)}getMeaning(state.secret),startup();
